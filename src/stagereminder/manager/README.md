# manager 模块

## 模块职责

- 与 SQLite 数据库交互
  - 模型表：关注对象（关注对象ID、关注对象名称、关注对象微博用户ID）
  - 模型表：演出预告（演出ID、演出名称、演出时间、其它演出信息（JSON），微博链接）
  - 关系表：关注对象-演出预告（关注对象ID、演出ID）

## 模块功能

- 主进程：连接 QQ 机器人服务，响应用户消息。
  - 参考 notification 模块，当收到用户的 at_message 时，从数据库表中查询所有关注对象及其所有有效（演出时间晚于当前时间）的演出预告
  - 将查询到的关注对象及其演出预告以一个可读性好、花里胡哨的文本格式发送给用户
- 后台任务：定时更新所有关注对象的演出预告。
  - 遍历所有关注对象：
    - 获取关注对象微博用户ID，调用 crawler 模块获取其微博列表，遍历所有微博：
      - 调用 extractor 模块从微博内容中提取演出预告信息。
      - 如果提取到的演出预告信息与数据库中已有的演出预告名称、时间都相同，则跳过。
      - 反之，将此演出预告信息插入数据库表，并在关注对象-演出预告的关系表中插入对应关系。
- 在编写以上代码时，请加入详细的日志记录。
